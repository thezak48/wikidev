# Lidarr FAQ

## 目次

- [Lidarrはどのように動作しますか？](#Lidarrはどのように動作しますか)
- [Lidarrはどのようにリリースを見つけますか？](#Lidarrはどのようにリリースを見つけますか)
- [強制認証](#強制認証)
- [ダウンロードの比較はどのように行われますか？](#ダウンロードの比較はどのように行われますか)
- [Ubuntu 22.04にアップデートした後、Lidarrが動作しなくなりました](#Ubuntu-22.04にアップデートした後、Lidarrが動作しなくなりました)
- [なぜ新しいリリースやアーティストをLidarrに追加できないのですか？](#なぜ新しいリリースやアーティストをLidarrに追加できないのですか)
- [なぜVarious Artistsのアルバムを追加できないのですか？](#なぜVarious-Artistsのアルバムを追加できないのですか)
- [なぜLidarrはスタジオアルバムのみ表示され、シングルやEPを見つけることができないのですか？](#なぜLidarrはスタジオアルバムのみ表示され、シングルやEPを見つけることができないのですか)
- [単一のアルバムを追加できますか？](#単一のアルバムを追加できますか)
- [単一のトラックをダウンロードできますか？](#単一のトラックをダウンロードできますか)
- [なぜアーティストXが検索に表示されないのですか？](#なぜアーティストXが検索に表示されないのですか)
- [Lidarrはトラック数が多すぎるアルバムをマッチングしました。アルバムを正しいリリースに変更するにはどうすればよいですか？](#Lidarrはトラック数が多すぎるアルバムをマッチングしました。アルバムを正しいリリースに変更するにはどうすればよいですか)
- [Lidarrでリリースが見つからないが、MusicBrainzには存在します](#Lidarrでリリースが見つからないが、MusicBrainzには存在します)
- [LidarrとMusicBrainzのデータベースはどのくらいの頻度で同期されますか？](#LidarrとMusicBrainzのデータベースはどのくらいの頻度で同期されますか)
- [どのようにしてアーティストの画像を追加できますか？](#どのようにしてアーティストの画像を追加できますか)
- [どのようにしてアルバムの画像（カバーアート）を取得できますか？](#どのようにしてアルバムの画像カバーアートを取得できますか)
- [アーティストのインポートに問題があります。原因は何ですか？](#アーティストのインポートに問題があります。原因は何ですか)
- [アーティストフォルダの名前を変更するにはどうすればよいですか？](#アーティストフォルダの名前を変更するにはどうすればよいですか)
- [Wantedリストからアーティストを一括削除するにはどうすればよいですか？](#Wantedリストからアーティストを一括削除するにはどうすればよいですか)
- [Lidarrはリバースプロキシの背後で動作しないのはなぜですか](#Lidarrはリバースプロキシの背後で動作しないのはなぜですか)
- [Lidarrを更新するにはどうすればよいですか？](#Lidarrを更新するにはどうすればよいですか)
- [nightlyからdevelopに切り替えることはできますか？](#nightlyからdevelopに切り替えることはできますか)
- [ブランチを切り替えることはできますか？](#ブランチを切り替えることはできますか)
- [エラーが発生しています: データベースディスクイメージが壊れています](#エラーが発生しています-データベースディスクイメージが壊れています)
- [Lidarrをバックアップ/リストアするにはどうすればよいですか？](#Lidarrをバックアップリストアするにはどうすればよいですか)
- [MacでLidarrを使用していて、突然動作しなくなりました。何が起こったのでしょうか？](#MacでLidarrを使用していて、突然動作しなくなりました。何が起こったのでしょうか)
- [RaspbianとLidarrを使用しているPiで起動できません](#RaspbianとLidarrを使用しているPiで起動できません)
- [リストの同期時間が非常に長く、変更することはできますか？](#リストの同期時間が非常に長く、変更することはできますか)
- [リフレッシュリリースタスクを無効にできますか？](#リフレッシュリリースタスクを無効にできますか)
- [なぜLidarrはリモートサーバー上のファイルを見つけることができないのですか？](#なぜLidarrはリモートサーバー上のファイルを見つけることができないのですか)
- [ヘルプ、自分自身をロックアウトしてしまいました](#ヘルプ自分自身をロックアウトしてしまいました)
- [起動時にブラウザが起動するのを停止するにはどうすればよいですか？](#起動時にブラウザが起動するのを停止するにはどうすればよいですか)
- [奇妙なUIの問題](#奇妙なUIの問題)
- [VPN、Jackett、および\*ARRs](#VPNJackettおよびARRs)
- [Jackettの/allエンドポイント](#Jackettのallエンドポイント)
- [Jackettの/Allソリューション](#JackettのAllソリューション)
- [なぜ2つのファイルがあるのですか？ | ダウンロード時にファイルが残っているのはなぜですか？](#なぜ2つのファイルがあるのですか-ダウンロード時にファイルが残っているのはなぜですか)
- [クラウドストレージからAPI制限に関する警告が続くのですが](#クラウドストレージからAPI制限に関する警告が続くのですが)

## Lidarrはどのように動作しますか？

- Lidarrは、RSSフィードを利用してリリースを自動的に取得します。新しいリリースだけでなく、以前にリリースされたリリースの再リリースや再リリースも対象です。RSSフィードは、サイトからの最新のリリースで構成されており、通常は50から100のリリースですが、一部のサイトではそれ以上またはそれ以下のリリースが提供されます。RSSフィードには、リクエストしたメディアをフォローしていないリリースも含まれています。デバッグログを確認すると、これらのリリースが処理されていることがわかりますが、これは完全に正常です。
- Lidarrは、RSS同期間隔の最小値を10分、最大値を2時間としています。ほとんどのインデクサーは15分を最小推奨値としていますが、一部のインデクサーではより低い間隔を許可しており、2時間はリリースを見逃さないように頻繁にチェックするための十分な頻度です（多くのインデクサーではRSSフィードをページングしてこれをサポートしています）。一部のインデクサーでは、クライアントが10分より頻繁にRSS同期を実行できるようにする場合、LidarrのRelease-Push APIエンドポイントを使用してIRCアナウンスチャネルと組み合わせてリリースをLidarrにプッシュして処理することをお勧めします。これにより、リリースをほぼリアルタイムで処理でき、インデクサーやLidarrに対するオーバーヘッドが少なくなります。

## Lidarrはどのようにリリースを見つけますか？

- Lidarrは、欠落しているアルバムファイルや品質目標を満たしていないアルバムファイルを定期的に検索するわけではありません。代わりに、頻繁にインデクサーやトラッカーに対して「すべて」の新しく投稿されたリリースをクエリし、それを欠落しているリリースやアップグレードが必要なリリースのリストと比較します。一致するリリースはダウンロードされます。これにより、Lidarrは1日あたり24〜100のクエリ（RSS間隔が15〜60分）で「任意のサイズ」のライブラリをカバーできます。これを理解すれば、それが「将来」のみをカバーすることに気付くでしょう。
- では、現在と過去はどうすればよいのでしょうか？アルバムを追加する場合、正しいパス、プロファイル、および監視ステータスを設定し、欠落しているアルバムの検索を開始するには、[欠落しているアルバムの検索を開始する] チェックボックスを使用します。アルバムがまだリリースされていない場合、検索を開始する必要はありません。
- 別の方法として、アルバムのページに移動し、検索ボタンを使用して検索し、自動的に1つを選択することができます。また、[検索] タブを使用してすべての結果を表示し、必要なものを手動で選択することもできます。または、[Missing]、[Wanted]、または[Cut-off Unmet] のフィルターを使用することもできます。
- Lidarrが長期間オフラインになった場合、Lidarrは最後に処理したリリースを見つけるためにページバックを試み、リリースを見逃さないようにします。インデクサーがページングをサポートしており、それほど長い時間が経過していない場合、Lidarrは見逃したリリースの検索を実行せずに処理できます。

## 強制認証

LidarrのUIに外部ネットワークからアクセスできるように公開している場合、UIにアクセスするためには何らかの認証方法を有効にする必要があります。これは、トラッカーやインデクサーでもますます必要とされています。

Lidarr v2以降、認証は必須です。

### 認証方法

- `Basic`（ブラウザのポップアップ）- このオプションを選択すると、Lidarrにアクセスする際にユーザー名とパスワードを入力する小さなポップアップが表示されます。
- `Forms`（ログインページ）- このオプションを選択すると、Lidarrにログインするための一般的なログイン画面が表示されます。
- `External` - 設定ファイルでのみ設定可能
  - Authelia、Authetik、NGINX Basic authなどの**外部認証**を使用する場合、アプリをシャットダウンし、[設定ファイル](/lidarr/appdata-directory)で`<AuthenticationMethod>External</AuthenticationMethod>`を設定し、アプリを再起動します。ファイル内の複数の`AuthenticationMethod`エントリはサポートされていないため、最上位の値のみが使用されます。

### 認証が必要な場合

- アプリを外部に公開していない場合や、ローカル（LAN）アクセスに認証が必要でない場合は、[設定] => [一般的なセキュリティ] => [認証が必要なアドレスに対して無効] に変更します。
  - これに相当する設定ファイルのエントリは`<AuthenticationType>DisabledForLocalAddresses</AuthenticationType>`です。

## ダウンロードの比較はどのように行われますか？

> 一般的には品質が最優先です。品質を最優先しない場合は、品質を統合することができます。[TRaSH's Guide](https://trash-guides.info/merge-quality)を参照してください。***
{.is-info}

- 現在のロジックは[こちらで確認できます](https://github.com/Lidarr/Lidarr/blob/develop/src/NzbDrone.Core/DecisionEngine/DownloadDecisionComparer.cs)。

- 2022-01-23現在のロジックは次のとおりです。

1. 品質
1. 優先ワードスコア
1. プロトコル（関連する遅延プロファイルで設定されている通り）
1. インデクサーの優先度
1. シード数/ピア数（Torrentの場合）
1. アルバム数
1. 年齢（Usenetの場合）
1. サイズ

## Ubuntu 22.04にアップデートした後、Lidarrが動作しなくなりました

- Lidarr v0.8はUbuntu 22.04には互換性がなく、サポートされていません。
- Lidarr v1のみがUbuntu 22.04をサポートしています。
- [ブランチとバージョンについては、このFAQエントリを参照してください](#Lidarrを更新するにはどうすればよいですか)

## なぜ新しいリリースやアーティストをLidarrに追加できないのですか？

- リリースはおそらくMusicBrainzで「unknown」タイプです。

## なぜVarious Artistsのアルバムを追加できないのですか？

- Various Artistsやその他のメタアーティストは、Musicbrainzのエントリ数が多いためです。

## なぜLidarrはスタジオアルバムのみ表示され、シングルやEPを見つけることができないのですか？

- Lidarrは、各アーティストのスタジオアルバムのみを表示するようにデフォルトで設定されています。ただし、メタデータプロファイルを使用して、アーティストごとまたはライブラリ全体のアルバムタイプを拡張することができます。

## 単一のアルバムを追加できますか？

- 現時点ではできません。

## 単一のトラックをダウンロードできますか？

- Lidarrは、フルリリースを検索してダウンロードすることで動作します。したがって、アーティストがシングルとしてリリースした場合を除いて、個々のトラックをダウンロードすることはできません。

## なぜアーティストXが検索に表示されないのですか？

- 検索はまだ進行中です。検索に表示されないアーティストは、「lidarr:mbid」と検索してアーティストのMusicbrainz IDを指定して追加することができます。

## Lidarrはトラック数が多すぎるアルバムをマッチングしました。アルバムを正しいリリースに変更するにはどうすればよいですか？

- アルバムの詳細ページを開き、トップナビゲーションの編集アイコンを選択します。そこで、そのアルバムに関連するすべてのリリースのドロップダウンリストを見つけることができます。

## Lidarrでリリースが見つからないが、MusicBrainzには存在します

- これはおそらくリリースが「unknown」のリリースステータスを持っているためです。MusicBrainzを更新してください。

## LidarrとMusicBrainzのデータベースはどのくらいの頻度で同期されますか？

- 毎時の5分後に同期されます。

## どのようにしてアーティストの画像を追加できますか？

- fanart.tvにアートを追加し、キャッシュをクリアするまで約7日以上待ちます。その後、メタデータを更新します。

## どのようにしてアルバムの画像（カバーアート）を取得できますか？

- musicbrainzにカバーアートを追加し、キャッシュをクリアするまで約1時間以上待ちます。その後、メタデータを更新します。

## アーティストのインポートに問題があります。原因は何ですか？

- アーティストのインポートプロセスは、アーティスト名とパスの場所をインポートするだけで、データベースに格納されます。これにより、メタデータを取得したり、将来のダウンロードコンテンツを同じ場所に配置したりすることができます。このため、Lidarrが実行されるユーザーアカウントは、データディレクトリに対して読み取りと書き込みの両方の権限を持つ必要があります。

## アーティストフォルダの名前を変更するにはどうすればよいですか？

{#rename-folders}

> アーティストのパスを移動/変更する場合も同じ手順が適用されます。
{.is-info}

1. ライブラリ
1. マスエディター
1. フォルダの名前を変更するアーティストを選択します
1. ルートフォルダを現在のアーティストが存在するルートフォルダに変更します
1. 「はい、ファイルを移動する」を選択します

## Wantedリストからアーティストを一括削除するにはどうすればよいですか？

- マスエディター => 削除したいアーティストを選択 => 削除

## Lidarrはリバースプロキシの背後で動作しないのはなぜですか

- Lidarrは.NETと新しいWebサーバーを使用しています。SignalRが動作するためには、UIボタンが動作し、データベースの変更が適用され、その他の項目が必要です。そのため、Lidarrの場所ブロックに次の追加設定が必要です。
 proxy_http_version 1.1;
 proxy_set_header Upgrade $http_upgrade;
 proxy_set_header Connection $http_connection;

- nginxのドキュメントで提案されているように`proxy_set_header Connection "Upgrade";`を含めないようにしてください。`これは機能しません`
- [このASP.NET Coreの問題を参照してください](https://github.com/aspnet/AspNetCore/issues/17081)
- CloudflareのようなCDNを使用している場合は、WebSocket接続を許可するためにWebSocketを有効にしてください。

## Lidarrを更新するにはどうすればよいですか？

- [設定]に移動し、[一般]タブを表示し、詳細設定を表示します（保存ボタンの横にあるトグルを使用します）。

1. [更新]セクションでブランチ名を`master`または`develop`に変更します
1. 保存

*これにより、そのブランチのビットがすぐにインストールされるわけではありません。次回の更新時にインストールされます。*

- `master` - ![現在のマスター/安定版](https://img.shields.io/badge/dynamic/json?color=f5f5f5&style=flat-square&label=マスター&query=%24%5B0%5D.version&url=https://lidarr.servarr.com/v1/update/master/changes) - (デフォルト/安定版): 開発およびナイトリーブランチでユーザーによってテストされ、重大な問題がないことが確認されています。このバージョンはおおよそ月に一度更新されます。GitHubでは、これは`master`ブランチです。

- `develop` - ![現在のデベロップ/ベータ版](https://img.shields.io/badge/dynamic/json?color=f5f5f5&style=flat-square&label=デベロップ&query=%24%5B0%5D.version&url=https://lidarr.servarr.com/v1/update/develop/changes) - (ベータ版): これはテストエッジです。ナイトリーでテストされた後にリリースされ、直ちに問題がないことが確認されます。新機能とバグ修正は、ナイトリーの後にここで最初にリリースされます。これは半ば安定していると考えることができますが、まだ`ベータ`です。このバージョンは、開発に応じて週に一度または二週に一度更新されます。

> **警告: `develop`ブランチに切り替えた後は、`master`に戻ることができない場合があります。** GitHubでは、これは特定の時点での`develop`ブランチのスナップショットです。
{.is-warning}

- `nightly` - ![現在のナイトリー/不安定版](https://img.shields.io/badge/dynamic/json?color=f5f5f5&style=flat-square&label=ナイトリー&query=%24%5B0%5D.version&url=https://lidarr.servarr.com/v1/update/nightly/changes) - (アルファ/不安定版): これは最先端の開発版です。コードがコミットされ、すべての自動テストに合格した直後にリリースされます。このビルドはまだ私たちや他のユーザーによって使用されていない場合があります。場合によっては、実行すらできない可能性があります。このブランチは上級ユーザーにのみお勧めです。このブランチでは問題が発生し、自己調査が予想されます。***このブランチは、何をしているかを理解しており、失敗したアップデートを回復するために手を汚す覚悟がある場合にのみ使用してください。***このバージョンはすぐに更新されます。

> **警告: `nightly`ブランチに切り替えた後は、`master`に戻ることができない場合があります。** GitHubでは、これは`develop`ブランチです。
{.is-danger}

- 注意: Dockerを使用してインストールしている場合は、コンテナタグの末尾に`:release`、`:latest`、`:testing`、または`:develop`を追加してください。ただし、`nightly`ブランチは意図的に以下にリストされていません。

|                                                                    | `master` (安定版) ![現在のマスター/最新版](https://img.shields.io/badge/dynamic/json?color=f5f5f5&style=flat-square&label=マスター&query=%24%5B0%5D.version&url=https://lidarr.servarr.com/v1/update/master/changes) | `develop` (ベータ版) ![現在のデベロップ/ベータ版](https://img.shields.io/badge/dynamic/json?color=f5f5f5&style=flat-square&label=デベロップ&query=%24%5B0%5D.version&url=https://lidarr.servarr.com/v1/update/develop/changes) | `nightly` (アルファ版) ![現在のナイトリー/アルファ版](https://img.shields.io/badge/dynamic/json?color=f5f5f5&style=flat-square&label=ナイトリー&query=%24%5B0%5D.version&url=https://lidarr.servarr.com/v1/update/nightly/changes) |
| ------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [hotio](https://hotio.dev/containers/lidarr)                       | `release`                                                                                                                                                                                                             | `testing`                                                                                                                                                                                                           | `nightly`                                                                                                                                                                                                             |
| [LinuxServer.io](https://docs.linuxserver.io/images/docker-lidarr) | `latest`                                                                                                                                                                                                              | `develop`                                                                                                                                                                                                           | `nightly`                                                                                                                                                                                                             |

### Dockerコンテナ内のLidarrを更新できますか？

- *技術的には可能ですが、絶対に行ってはいけません。* これはDockerの主要な哲学です。もしも最新の`nightly`にアップグレードしてからDockerコンテナ自体を更新する（古いバージョンにダウングレードする）と、データベースの問題が発生する可能性があります。

### より新しいバージョンのインストール

#### ネイティブ

1. システムに移動し、[更新]タブをクリックします。
1. インストールされていないより新しいバージョンには、その横に更新ボタンが表示されます。そのボタンをクリックすると、更新がインストールされます。

#### Docker

1. タグを再プルし、コンテナを更新します。

## `nightly`から`develop`に戻すことはできますか？

## ブランチ間を切り替えることはできますか？

- バージョンが同じ場合は切り替えることができますが、それ以外の場合は、対象のビルドで`nightly`から`master`、`nightly`から`develop`、または`develop`から`master`に切り替えることができるか、開発チームに確認してください。
- これらの手順に従わないと、Lidarrが使用できなくなったりエラーが発生する可能性があります。警告されています。
  - 最も一般的なエラーは、「列45の解析エラー（Language=31 - Int64）」や、欠落している列やテーブルに関する他の類似のデータベースエラーです。

## エラーが発生しています: データベースディスクイメージが壊れています

- **「ログデータベースの作成エラー」のエラーは、logs.dbに問題があることを示しています**
  - これは、データベースの名前を変更するか削除することで迅速に解決できます。ログデータベースには、コマンドの履歴や更新のインストール履歴、およびInfo、Warn、Errorのエントリに関する重要でない情報が含まれています。
- **「メインデータベースの作成エラー」または一般的な「データベースディスクイメージが壊れています」と指定されていないデータベースのエラーは、lidarr.dbに問題があることを示しています**
  - 以下の手順を続けてください
- これは、Lidarrのほとんどの情報を保存しているSQLiteデータベースが破損していることを意味します。現在のデータベースをバックアップし、既存のデータベースを回復し、バックアップを回復し、それでもうまくいかない場合は、新しいデータベースで最初からやり直すことができます。
- このエラーは、データベースファイルが\*Arrが実行されているユーザー/グループによって書き込み可能でない場合に表示される場合があります。パーミッションの原因は、新しいインストール、新しいサーバーへの移行、最近のappdataディレクトリのパーミッションの変更、または\*Arrの実行ユーザーとグループの変更の場合にのみ問題になる可能性があります。
- 最初のオプションは、[バックアップからの復元を試すことです](#how-do-i-backuprestore-my-lidarr)
- データベースを回復することもできます。これは、通常、アップデート後にこの問題が発生した場合の唯一のオプションです。[sqlite3の`.recover`コマンド](/useful-tools#recovering-a-corrupt-db)を試してみてください。
  - もしsqliteに`.recover`がない場合や、よりGUI（Windowsなど）に優しい方法を希望する場合は、[このウィキの手順に従ってください。](/useful-tools#recovering-a-corrupt-db-ui)
- データベースのエラーの別の可能な原因は、データベースをネットワークドライブ（nfsまたはsmbなどのローカルではないもの）に配置していることです。**SQLiteは、データとアプリケーションが同じマシン上に共存する状況を想定しています。**したがって、\*Arr AppDataフォルダ（Dockerの/configマウント）は、ローカルストレージ上にある必要があります。[SQLiteとネットワークドライブはうまく動作せず、データベースが壊れる可能性があります](https://www.sqlite.org/draft/useovernet.html)。
- mergerFSを使用している場合は、mmapを使用するSQLiteが`direct_io`でサポートされていないため、`direct_io`を削除する必要があります。詳細については、mergerFSの[ドキュメント](https://github.com/trapexit/mergerfs#plex-doesnt-work-with-mergerfs)を参照してください。

## Lidarrのバックアップ/リストアはどのように行いますか？

### Lidarrのバックアップ

#### 組み込みのバックアップを使用する

- LidarrのUIで[システム] => [バックアップ]に移動します。
- バックアップボタンをクリックします。
- バックアップが作成された後、zipファイルをダウンロードして安全な場所に保存します。

#### ファイルシステムを直接使用する

- LidarrのAppDataディレクトリの場所を見つけます
  - LidarrのUIで[システム] => [About]に移動します
  - [Lidarr Appdata Directory](/lidarr/appdata-directory)
- Lidarrを停止します。これにより、データベースが破損するのを防ぎます。
- 内容を安全な場所にコピーします。

### バックアップからのリストア

> 異なるパスを使用するOSにリストアすることはできません（WindowsからLinux、LinuxからWindows、WindowsからOS X、またはOS XからWindows）。OS XとLinuxの間の移動は、お互いに`/`を含むパスを使用しているため、動作する場合がありますが、サポートされていません。データベース内のすべてのパスを手動で編集する必要があります。
{.is-warning}

#### zipバックアップを使用する

- Lidarrを再インストールします（該当する場合/すでにインストールされていない場合）。
- Lidarrを実行します。
- [システム] => [バックアップ]に移動します。
- バックアップを復元を選択します。
- ファイルを選択を選択します。
- バックアップのzipファイルを選択します。
- リストアを選択します。

#### ファイルシステムバックアップを使用する

- Lidarrを再インストールします（該当する場合/すでにインストールされていない場合）。
- LidarrのAppDataディレクトリの場所を見つけます
  - Lidarrを一度実行し、UIで[システム] => [About]に移動します
  - [Lidarr Appdata Directory](/lidarr/appdata-directory)
- Lidarrを停止します。
- AppDataディレクトリの内容を削除します（.db-wal/.db-journalファイルが存在する場合も削除します）。
- バックアップから復元します。
- Lidarrを起動します。
- パスが同じであれば、すべてが元の状態から再開されます。

#### Synology NASでのファイルシステムリストア

> 注意: Synologyでのリストアには、Linuxの知識とSynologyデバイスへのルートSSHアクセスが必要です。
{.is-warning}

- Lidarrを再インストールします（該当する場合/すでにインストールされていない場合）。
- LidarrのAppDataディレクトリの場所を見つけます
  - Lidarrを一度実行し、UIで[システム] => [About]に移動します
  - [Lidarr Appdata Directory](/lidarr/appdata-directory)
- Lidarrを停止します。
- SSHを介してSynology NASに接続し、rootとしてログインします。

> インストールによっては、ユーザーが以下のコマンドと異なる場合があります: `chown -R sc-Lidarr:Lidarr *` {.is-info}

- 次のコマンドを実行します:

```shell
rm -r /usr/local/Lidarr/var/.config/Lidarr/Lidarr.db
cp -f /tmp/Lidarr_backup/* /usr/local/Lidarr/var/.config/Lidarr/
```

- ファイルのアクセス権を更新します:

 ```shell
cd /usr/local/Lidarr/var/.config/Lidarr/
chown -R Lidarr:users *
chmod -R 0644 *
```

- Lidarrを起動します。

## MacでLidarrを使用していて、突然動作しなくなりました。何が起こったのでしょうか？

- おそらくこれは、MacOSのバグにより、データベースの1つが破損したためです。

- 上記の「データベースが壊れています」のエントリを参照してください。

- それから起動を試み、動作するかどうかを確認します。動作しない場合は、さらなるサポートが必要です。[subreddit /r/lidarr](http://reddit.com/r/lidarr)に投稿するか、[discord](https://lidarr.audio/discord)に参加してヘルプを求めてください。

## Raspberry PiとRaspbianでLidarrが起動しない

Raspbianには、Ubuntu 20.04をベースにしたDockerコンテナを実行するために必要なバージョンのlibseccomp2が古すぎるため、hotioとLinuxServerの両方が使用しています。`--privileged`を使用するか、Ubuntuからlibseccomp2を更新するか、より良いOSを入手する必要があります（Ubuntu 20.04 arm64をお勧めします）。

**可能な解決策：**

Debianリポジトリからバックポートをインストールすることで、問題を修正できました。一括アップグレードモードでバックポートを使用することは一般的に推奨されていません。単一のパッケージのインストールは問題ない場合もありますが、問題を引き起こす可能性もあります。したがって、自分が何をしているのかを理解する必要があります。

修正手順：

まず、Raspbian Busterを実行していることを確認します。`lsb_release -a`を使用して確認できます。

> Distributor ID: Raspbian
> Description: Raspbian GNU/Linux 10 (buster)
> Release: 10
> Codename: buster

- Busterを使用している場合：
  - 以下のコマンドを実行してバックポートをソースに追加します。

  ```shell
   echo "deb <http://deb.debian.org/debian> buster-backports main" | sudo tee /etc/apt/sources.list.d/buster-backports.list
   ```

  - libseccomp2のバックポートをインストールします。

  ```shell
  sudo apt update && sudo apt-get -t buster-backports install libseccomp2
  ```

## リストの同期時間が非常に長いのはなぜですか？変更することはできますか？

リストは常に「今すぐ追加する」のではなく、「いつか追加する」ツールです。

リストの更新を手動でトリガーすることができます。スクリプトを作成し、API経由でトリガーすることもできます。または、Lidarrに直接リリースを追加することもできます。

この変更は、リストを10分ごとに更新することでサーバーが過負荷になるのを防ぐために行われました。

## リフレッシュリリースタスクを無効にできますか？

いいえ、また、SQLのハッカリを使用して無効にするべきではありません。リフレッシュリリースタスクは、上流のServarrプロキシにクエリを送信し、各リリースのメタデータ（ID、キャスト、概要、評価、翻訳、代替タイトルなど）がLidarrに現在保存されているものと比較して更新されたかどうかを確認します。必要な場合、該当するリリースを更新します。

リフレッシュタスクがI/O使用量が多くなるという一般的な苦情があります。問題を引き起こす可能性のある設定の1つは、「リフレッシュ後にアーティストフォルダを再スキャンする」です。リフレッシュ中にディスクのI/O使用量が急増する場合は、リスキャン設定を「手動」に変更することを検討してください。すべてのライブラリの変更（新しいリリース、アップグレード、削除など）がLidarrを介して行われる場合を除き、これを「決して」に変更しないでください。リリースファイルを手動で削除するか、サードパーティのプログラムで削除する場合は、「決して」に設定しないでください。

## リモートサーバー上のファイルがLidarrで表示されないのはなぜですか？

- すべてのOSで、\*Arrを実行しているユーザー/グループがマウントされたドライブに読み取りおよび書き込みアクセス権を持っていることを確認してください。
- Linuxの場合：
  - NFSマウントを使用している場合は、マウントに`nolock`が有効になっていることを確認してください。
  - SMBマウントを使用している場合は、マウントに`nobrl`が有効になっていることを確認してください。
- Windowsの場合：簡単に言えば、\*Arrがリモートサーバー上のファイルパスにアクセスできないためです。これにはさまざまな理由がありますが、最も一般的なのは、\*Arrがサービスとして実行されている場合です。これにより、以下で説明する問題が発生します。

### LidarrはデフォルトでLocalServiceアカウントで実行されており、保護されたリモートファイル共有にアクセスできません

- Lidarrサービスを別のユーザーアカウントで実行します（その共有にアクセスできるユーザーアカウントに変更します）。
- Windowsサーバーで管理ツール＞サービスウィンドウを開きます。
- Lidarrサービスを停止します。
- プロパティ＞ログオンダイアログを開きます。
- サービスユーザーアカウントをターゲットユーザーアカウントに変更します。
- スタートアップフォルダーを使用してLidarr.exeを実行します。

### マップされたネットワークドライブ（UNCパスではない）を使用しています

- パスをUNCパス（`\\server\share`）に変更します。
- スタートアップフォルダーを使用してLidarr.exeを実行します。

## ヘルプ：自分自身をロックアウトしてしまいました

{#help-i-have-forgotten-my-password}

認証を無効にする（忘れたユーザー名またはパスワードをリセットする）には、`config.xml`を編集する必要があります。これは[Lidarrアプリデータディレクトリ](/lidarr/appdata-directory)内にあります。

1. テキストエディタでconfig.xmlを開きます。
1. 認証メソッドの行を見つけます。`<AuthenticationMethod>Basic</AuthenticationMethod>`または`<AuthenticationMethod>Forms</AuthenticationMethod>`となります。
1. `AuthenticationMethod`行を`<AuthenticationMethod>None</AuthenticationMethod>`に変更します。
1. Lidarrを再起動します。
1. Lidarrは今後パスワードなしでアクセスできるようになります。UIの「設定：一般」に移動し、ユーザー名とパスワードを設定してください。

## 起動時にブラウザが起動するのを止めるにはどうすればいいですか？

OSによって、複数の方法があります。

- 一部のOSでは、「設定」=>「一般」で、起動時にブラウザを起動するためのチェックボックスがあります。
- Lidarrを起動する際に、引数に`-nobrowser`（*nix）または`/nobrowser`（Windows）を追加することができます。
- Lidarrを停止し、config.xmlファイルを編集し、`<LaunchBrowser>True</LaunchBrowser>`を`<LaunchBrowser>False</LaunchBrowser>`に変更します。

## 奇妙なUIの問題

- ライブラリページが何も表示されない、特定のビューまたはソートが機能しないなど、奇妙なUIの問題が発生した場合は、ChromeのシークレットウィンドウまたはFirefoxのプライベートウィンドウで表示してみてください。そこで正常に動作する場合は、特定のIP/ドメインのブラウザのキャッシュとクッキーをクリアしてください。詳細については、[キャッシュとクッキーのクリア](/useful-tools#clearing-cookies-and-local-storage)のWiki記事を参照してください。

## VPN、Jackett、および\*ARRs

- 中国、オーストラリア、南アフリカなどの抑圧的な国を除いて、通常、トレントクライアントのみがVPNの背後にある必要があります。VPNエンドポイントは多くのユーザーと共有されているため、各ソフトウェアが使用するさまざまなサービスからのレート制限、DDOS保護、IP禁止などが発生する可能性があります。
- 言い換えれば、\*Arr（Lidarr、Prowlarr、Radarr、Readarr、Lidarr）をVPNの背後に配置すると、サービスにアクセスできなくなる場合があります。

> **明確に言っておきますが、VPNが\*Arrに問題を引き起こすかどうかではなく、いつ問題が発生するかです：イメージプロバイダーはあなたをブロックし、Cloudflareは\*Arrサーバー（更新、メタデータなど）の前にあり、あなたをブロックする可能性があります**
{.is-warning}

- **多くのプライベートトラッカーは、VPNを使用してそれらにアクセスする（JackettやProwlarrを使用する）ことであなたを禁止します。**

### VPNの使用

- VPNが必要であり、Dockerを使用している場合は、HotioまたはBinhexのDownload Client + VPNコンテナを使用することをお勧めします。
- VPNが必要であり、Dockerを使用していない場合は、VPNクライアントがスプリットトンネリングをサポートしている必要があります。必要な（Download Client）アプリのみがVPNの背後にあるようにします。
- トラッカーへのアクセスに関する多くの問題は、ISPのDNSサーバーの代わりにGoogleやCloudflareのDNSサーバーを使用することで解決できます。
- 一部の場合（英国のISPなど）、トレントダウンロードクライアントをVPNの背後に配置し、Jackett/Prowlarrを次のように構成する必要があります：
  - JackettをVPNの背後に配置し、スプリットトンネリングがローカルアクセスを許可するようにします。
  - Prowlarrの場合、VPNクライアントを構成してプロキシを提供し、設定=>インデクサーにプロキシを追加します。プロキシにタグを付け、それを使用する必要があるインデクサーにも同じタグを付けます。
    - 必要な場合、およびVPNがプロキシを作成する方法を提供しない場合は、ProwlarrをVPNの背後に配置し、スプリットトンネリングがローカルアクセスを許可するようにします。

## Jackettの/allエンドポイント

{#jackett-all-endpoint}

- Jackettの`/all`エンドポイントは便利ですが、それ以外の利点はありません。その他のすべては潜在的な問題ですので、各トラッカーを個別に追加する必要があります。または、Jackett＆NZBHydra2の代替である[Prowlarr](/prowlarr)をご覧ください。
- **2022年4月の更新：ジャケットの`/all`のサポートは問題を引き起こすだけなので削除されました。**
- Jackettの/allエンドポイントは便利ですが、それ以外の利点はありません。その他のすべては潜在的な問題ですので、各トラッカーを個別に追加する必要があります。
- [Jackettの開発者自身も、これを避けるべきであり、使用すべきではないと言っています。](https://github.com/Jackett/Jackett#aggregate-indexers)
- /allエンドポイントの使用には利点はなく、デメリットしかありません：
  - インデクサー固有の設定（カテゴリ、検索モードなど）を制御できなくなります。
  - 検索モード（IMDB、クエリなど）を混在させると、品質の低い結果が発生する可能性があります。
  - インデクサー固有のカテゴリ（100000以上）は使用できません。
  - 遅いインデクサーは全体の結果を遅くします。
  - 合計結果は1000に制限されます。
  - /allのトラッカーの1つがエラーを返すと、\*Arrはそれを無効にし、結果が得られなくなります。

### Jackett /Allの解決策

- Jackettで各トラッカーを個別にインデクサーとして追加します。
- [Prowlarr](/prowlarr)をチェックしてみてください。これはLidarr/Radarr/Readarrの開発チームからのもので、インデクサーを\*Arrに同期することができます。
- [NZBHydra2](https://github.com/theotherp/nzbhydra2)をチェックしてみてください。これはインデクサーを\*Arrに同期することができます。ただし、単一の集約エンドポイントではなく、同期に使用する場合は`multi`を使用してください。

## なぜ2つのファイルがあるのですか？ | ダウンロードフォルダにファイルが残っているのはなぜですか？

これは正常です。ハードリンクをサポートするセットアップでは、2倍のスペースは使用されません。以下はトレントプロセスの動作です。

1. Lidarrは、設定したカテゴリ名またはラベルと関連付けて、ダウンロードリクエストをクライアントに送信します。例：movies、tv、series、musicなど。
1. Lidarrは、そのカテゴリ名を使用して、ダウンロードクライアントのアクティブなダウンロードを監視します。この監視は、ダウンロードクライアントのAPIを介して行われます。
1. 完了したファイルは、ファイルをシードするために元の場所に残されます（比率や時間は、ダウンロードクライアントまたは特定のダウンロードクライアント内で調整できます）。ファイルがメディアフォルダにインポートされると、サポートされている場合はハードリンクが作成され、サポートされていない場合はコピーが作成されます。
1. Lidarrの設定で「完了したダウンロードの処理 - 完了したものを削除」オプションが有効になっている場合、Lidarrは、ダウンロードクライアントがシードが完了し、トレントが停止（一時停止）されていることを報告する場合にのみ、元のファイルとトレントを削除します。最適なダウンロードクライアントの設定方法については、[TRaSHのダウンロードクライアントガイド](https://trash-guides.info/Downloaders/)を参照してください。

> ハードリンクはデフォルトで有効になっています。[ハードリンクは追加のディスクスペースを使用しません。](https://trash-guides.info/Hardlinks/Hardlinks-and-Instant-Moves/)完了したダウンロードディレクトリとメディアライブラリのファイルシステムとマウントは同じである必要があります。ハードリンクの作成に失敗した場合や、ハードリンクがサポートされていない場合は、ファイルをコピーします。
{.is-info}

## クラウドストレージからAPI制限に関する警告が頻繁に表示されます

Lidarrは他のArrとは異なり、操作にファイル名ではなくタグを使用します。Lidarrファイルをクラウドストレージに保存している場合、タグを読み取るためにファイルをダウンロードする必要があります。これにより、ストレージプロバイダーのAPI制限がすぐに使い果たされてしまいます。Lidarrライブラリをクラウドストレージプロバイダーに保存することは強くお勧めしませんし、おそらく問題が発生している原因です。